<div id="editOverlay" class="overlay" onclick="if(event.target === this) this.style.display='none'">
    <div class="overlay-content">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="mb-0" id="editOverlayTitle">Add App</h2>
            <div id="launchCountDisplay" class="text-muted small"></div>
        </div>
        <form id="editAppForm" onsubmit="return false;">
            <input type="hidden" id="editAppId">
            <div class="edit-form-grid">
                <label for="editAppName" class="form-label">App Name *</label>
                <div class="form-field">
                    <div class="input-group">
                        <input type="text" class="form-control" id="editAppName" required>
                        <button type="button" class="btn btn-outline-secondary" onclick="searchAppStore()" title="Search in DuckDuckGo">
                            <i class="bi bi-search"></i>
                        </button>
                    </div>
                </div>

                <label for="editAppCategory" class="form-label">Category</label>
                <div class="form-field">
                    <select class="form-select" id="editAppCategory">
                        <option value="">Select Category</option>
                        {% for category in data.categories %}
                        <option value="{{ category | lower }}">{{ category | title }}</option>
                        {% endfor %}
                    </select>
                    <div class="input-group mt-2">
                        <input type="text" class="form-control" id="newCategory" placeholder="Or type new category">
                        <button type="button" class="btn btn-outline-secondary" onclick="addNewCategory()">
                            <i class="bi bi-plus"></i>
                        </button>
                    </div>
                </div>

                <label for="editIconUrl" class="form-label">Icon URL</label>
                <div class="form-field">
                    <div class="input-group">
                        <input type="url" class="form-control" id="editIconUrl">
                        <button type="button" class="btn btn-outline-secondary" onclick="pasteFromClipboard('editIconUrl')" title="Paste from clipboard">
                            <i class="bi bi-clipboard"></i>
                        </button>
                    </div>
                </div>

                <label for="editAppStoreLink" class="form-label">App Store Link</label>
                <div class="form-field">
                    <div class="input-group">
                        <input type="url" class="form-control" id="editAppStoreLink"
                               pattern="https://apps\.apple\.com/.*"
                               placeholder="https://apps.apple.com/...">
                        <button type="button" class="btn btn-outline-secondary" onclick="pasteFromClipboard('editAppStoreLink')" title="Paste from clipboard">
                            <i class="bi bi-clipboard"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="d-flex justify-content-between mt-4">
                <button type="button" id="deleteAppBtn" class="btn btn-icon btn-outline-danger" onclick="deleteApp()" title="Delete App">
                    <i class="bi bi-trash"></i>
                </button>
                <div class="d-flex gap-2">
                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('editOverlay').style.display='none'">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- App Card Template -->
<template id="appCardTemplate">
    <div class="app-card" 
         data-app-id="" 
         data-app-name=""
         data-category=""
         data-icon-url=""
         data-app-store-link=""
         data-launch-count="0"
         data-last-launched="">
        <div class="app-icon">
            <img src="" alt="" loading="lazy">
        </div>
        <div class="app-name"></div>
    </div>
</template>
